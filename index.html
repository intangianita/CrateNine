<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üíåSurat Istimewa</title>
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body {
  font-family:'Georgia', serif;
  /* background: linear-gradient(135deg,#f5f7fa 0%,#c3cfe2 100%); */
  background: url('image.png') no-repeat center center;
  background-size: cover; /* biar menutupi seluruh layar */
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
  padding:20px;
}

/* floating hearts */
.heart { position:absolute; color:rgba(255,0,100,0.6); font-size:20px; animation: floatUp 6s linear forwards; user-select:none; pointer-events:none; z-index:1; }
@keyframes floatUp { 0% { transform:translateY(0) scale(1); opacity:1; } 100% { transform:translateY(-800px) scale(1.5); opacity:0; } }

/* Amplop */
.envelope-container { position:relative; cursor:pointer; width:450px; transform-style:preserve-3d; z-index:10; }
.envelope { width:100%; height:350px; background:linear-gradient(145deg,#ffffff 0%,#f8f9fa 100%); border:2px solid #e9ecef; position:relative; box-shadow:0 8px 32px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.8); border-radius:12px; overflow:hidden; }
.envelope-back { position:absolute; top:0; left:0; width:100%; height:100%; background:linear-gradient(145deg,#ffffff 0%,#f1f3f4 100%); border-radius:12px; }
.envelope-flap { position:absolute; top:-2px; left:-2px; width:454px; height:180px; background:linear-gradient(145deg,#ffffff 0%,#f8f9fa 100%); border:2px solid #e9ecef; border-bottom:none; clip-path:polygon(0 0,100% 0,50% 85%); transform-origin:50% 0%; transition: transform 0.8s cubic-bezier(0.25,0.46,0.45,0.94); z-index:10; box-shadow:0 4px 16px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.8); }
.envelope.opened .envelope-flap { transform: rotateX(-160deg); }
.envelope-inner { position:absolute; top:8px; left:8px; right:8px; bottom:8px; background:linear-gradient(145deg,#f8f9fa 0%,#e9ecef 100%); border-radius:6px; box-shadow: inset 0 2px 8px rgba(0,0,0,0.1); }
.envelope.opened .stamp {
  display: none;
}

/* Surat */
.letter {
  position:absolute;
  width:92%;
  height:0px; /* mulai dari 0 */
  background:linear-gradient(145deg,#ffffff 0%,#fefefe 100%);
  border:1px solid #dee2e6;
  border-radius:8px;
  left:50%;
  top:50%;
  transform:translate(-50%, -50%);
  opacity:0;
  box-shadow:0 8px 32px rgba(0,0,0,0.15), inset 0 1px 0 rgba(255,255,255,0.8);
  z-index:5;
  padding:20px;
  overflow:hidden;
  transition: height 0.3s ease, opacity 0.3s ease, transform 0.3s ease;
}
.letter.pop-up { opacity:1; }
.letter-content { opacity:0; transition: opacity 0.6s ease 0.3s; }
.letter.content-visible .letter-content { opacity:1; }

.letter-header {
  text-align: center;
  margin-bottom: 0px; /* lebih rapat */
  border-bottom: 1px solid #6c757d; /* tipis saja */
}
.letter-title {
  font-size: 22px;
  font-weight: bold;
  color: #495057;
  margin-bottom: 5px; /* jarak title & date lebih rapat */
}
.letter-date {
  font-size: 12px;
  color: #6c757d;
  font-style: italic;
  margin-bottom: 0; /* pastikan date menempel ke border bawah */
}
.letter-body { text-align:justify; white-space:pre-line; font-size:15px; line-height:1.5; }
.letter-signature { text-align:right; margin-top:10px; font-style:italic; color:#495057; }

.stamp {
  position: absolute;
  bottom: 15px;    /* ubah dari top ke bottom */
  right: 15px;     /* tetap di kanan */
  width: 60px;
  height: 60px;
  background: linear-gradient(145deg,#dc3545 0%,#c82333 100%);
  border: 3px solid #fff;
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 14px;
  font-weight: bold;
  box-shadow: 0 4px 12px rgba(220,53,69,0.3), inset 0 1px 0 rgba(255,255,255,0.2);
  z-index: 8;
}

.scroll-indicator { position:absolute; top:20px; left:50%; transform:translateX(-50%); color:#495057; font-size:13px; opacity:0; transition:opacity 0.3s ease; background:rgba(255,255,255,0.95); padding:8px 16px; border-radius:15px; box-shadow:0 4px 12px rgba(0,0,0,0.1); z-index:10; }
.scroll-indicator.visible { opacity:1; }

.instructions { position:absolute; bottom:20px; left:50%; transform:translateX(-50%); color:#495057; font-size:14px; opacity:0; background:rgba(255,255,255,0.9); padding:10px 20px; border-radius:20px; box-shadow:0 4px 12px rgba(0,0,0,0.1); z-index:10; }
.instructions.visible { opacity:1; }
</style>
</head>
<body>
<audio id="bgMusic" src="music.mp3" loop></audio>
<audio id="popSound" src="pop.wav"></audio>

<div class="envelope-container" id="envelopeContainer">
  <div class="envelope" id="envelope">
    <div class="envelope-back"></div>
    <div class="envelope-inner"></div>
    <div class="envelope-flap"></div>
    <div class="stamp">üìÆ <br><span style="font-size:8px;">MAIL</span></div>
  </div>
  <div class="letter" id="letter">
    <div class="letter-content">
      <div class="letter-header">
        <div class="letter-title">Surat Istimewa</div>
        <div class="letter-date">Purwakarta, 20 September 2025</div>
      </div>
      <div class="letter-body" id="letterBody">
9 bulan tidak terasa waktu sudah bergulir.
Tak terbayang jika dulu aku tak menghubungimu.
Di bulan ke-9 dan 9 bulan kita sudah berhubungan, aku bersyukur Allah memilihmu menjadi teman hidupku. Selama menunggu 12 bulan menuju pernikahan, kita melewatinya dengan bahagia dan ujian kecil, tapi aku yakin, kita akan mampu melewati semuanya ini bersama.

<i>Aku ingin kamu menjadi langit yang selalu menerima aku sebagai senja, menerima apa adanya.
Yang kadang hitam kelam, kadang merah merekah.</i>

<b>"Mau diulang 1000x pun, aku tetap mantap milih kamu"</b>

Aku pernah membayangkan bagaimana jika kita memulai lebih awal, tapi justru jarak dan waktu-lah yang membuat kita sama-sama berjuang dan memantaskan diri. Aku ingin menjadi teman hidup sesurgamu, selalu mencari ridho Allah. Semoga kamu menyukai hadiah kecilku‚Äîtanda sayang tanpa perlu dibalas. Semoga hubungan kita dengan Allah selalu dekat, agar kita tetap erat hingga maut memisahkan. Aamiin.
<div class="letter-signature">Tertanda,<br><b>Soremu</b> ‚ú®</div>
      </div>
    </div>
  </div>
</div>

<div class="scroll-indicator" id="scrollIndicator">üñ±Ô∏è Gunakan scroll untuk mengontrol surat</div>
<div class="instructions">Klik amplop untuk buka/tutup ‚Ä¢ Scroll ‚Üë‚Üì untuk mengontrol surat</div>

<script>
const envelopeContainer = document.getElementById('envelopeContainer');
const envelope = document.getElementById('envelope');
const letter = document.getElementById('letter');
const scrollIndicator = document.getElementById('scrollIndicator');
const instructions = document.querySelector('.instructions');
const bgMusic = document.getElementById('bgMusic');
const popSound = document.getElementById('popSound');

let isOpened = false;
let letterHeight = 0;
let maxLetterHeight = 0;
let bgStarted = false;
let scrollTimeout;
let instructionTimeout;

// buka amplop
function openEnvelope() {
  envelope.classList.add('opened');
  letter.classList.add('pop-up');
  setTimeout(() => letter.classList.add('content-visible'), 300);
  try { popSound.currentTime = 0; popSound.play(); } catch(e){}
  if (!bgStarted) { bgStarted = true; bgMusic.play().catch(() => {}); }
  isOpened = true;

  maxLetterHeight = letter.scrollHeight;
  letterHeight = 0;
  letter.style.height = `${letterHeight}px`;

  showScrollIndicator();
  showInstructions();
}

// tutup amplop
function closeEnvelope() {
  letter.classList.remove('content-visible');
  letter.classList.remove('pop-up');
  letterHeight = 0;
  letter.style.height = `0px`;
  scrollIndicator.classList.remove('visible');
  instructions.classList.remove('visible');
  setTimeout(() => { envelope.classList.remove('opened'); try { popSound.currentTime = 0; popSound.play(); } catch(e){} }, 300);
  isOpened = false;
}

// tampilkan scroll-indicator
function showScrollIndicator() {
  scrollIndicator.classList.add('visible');
  clearTimeout(scrollTimeout);
  scrollTimeout = setTimeout(() => scrollIndicator.classList.remove('visible'), 1800);
}

// tampilkan instructions
function showInstructions() {
  instructions.classList.add('visible');
  clearTimeout(instructionTimeout);
  instructionTimeout = setTimeout(() => instructions.classList.remove('visible'), 1800);
}

envelopeContainer.addEventListener('click', () => {
  if (isOpened) closeEnvelope();
  else openEnvelope();
});

// scroll untuk mengangkat/menurunkan surat
document.addEventListener('wheel', function(e) {
  if(!isOpened) return;
  e.preventDefault();

  showScrollIndicator();
  showInstructions();

  const delta = e.deltaY;
  letterHeight -= delta * 0.5;
  letterHeight = Math.max(0, Math.min(maxLetterHeight, letterHeight));
  letter.style.height = `${letterHeight}px`;

  if(letterHeight <= 0) closeEnvelope();
}, { passive:false });

// floating hearts
function createHeart() {
  const heart = document.createElement('div');
  heart.className = 'heart';
  heart.innerText = '‚ù§Ô∏è';
  heart.style.left = Math.random()*(window.innerWidth-40)+'px';
  heart.style.top = window.innerHeight+'px';
  heart.style.fontSize = (12+Math.random()*28)+'px';
  document.body.appendChild(heart);
  setTimeout(()=>heart.remove(),7000);
}
setInterval(createHeart,600);
</script>
</body>
</html>
