<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Amplop Interaktif</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Georgia', serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      padding: 20px;
    }

    /* Hati floating */
    .heart {
      position: absolute;
      color: rgba(255,0,100,0.6);
      font-size: 20px;
      animation: floatUp 6s linear forwards;
      user-select: none;
      pointer-events: none;
      z-index: 1;
    }

    @keyframes floatUp {
      0% { transform: translateY(0) scale(1); opacity: 1; }
      100% { transform: translateY(-800px) scale(1.5); opacity: 0; }
    }

    /* Amplop */
    .envelope-container {
      position: relative;
      cursor: pointer;
      width: 400px;
      transform-style: preserve-3d;
      z-index: 10;
    }

    .envelope {
      width: 100%;
      height: 300px;
      background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
      border: 2px solid #e9ecef;
      position: relative;
      box-shadow: 0 8px 32px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.8);
      border-radius: 12px;
      overflow: hidden;
    }

    .envelope-back {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(145deg, #ffffff 0%, #f1f3f4 100%);
      border-radius: 12px;
    }

    .envelope-flap {
      position: absolute;
      top: -2px;
      left: -2px;
      width: 404px;
      height: 160px;
      background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
      border: 2px solid #e9ecef;
      border-bottom: none;
      clip-path: polygon(0 0, 100% 0, 50% 85%);
      transform-origin: 50% 0%;
      transition: transform 0.8s cubic-bezier(0.25,0.46,0.45,0.94);
      z-index: 10;
      box-shadow: 0 4px 16px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.8);
    }

    .envelope.opened .envelope-flap {
      transform: rotateX(-160deg);
    }

    .envelope-inner {
      position: absolute;
      top: 8px;
      left: 8px;
      right: 8px;
      bottom: 8px;
      background: linear-gradient(145deg, #f8f9fa 0%, #e9ecef 100%);
      border-radius: 6px;
      box-shadow: inset 0 2px 8px rgba(0,0,0,0.1);
    }

    /* Surat */
    .letter {
      position: absolute;
      width: 92%;
      background: linear-gradient(145deg, #ffffff 0%, #fefefe 100%);
      border: 1px solid #dee2e6;
      border-radius: 8px;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      opacity: 0;
      box-shadow: 0 8px 32px rgba(0,0,0,0.15), inset 0 1px 0 rgba(255,255,255,0.8);
      z-index: 5;
      padding: 20px;
      transition: transform 0.3s ease, opacity 0.3s ease;
    }

    .letter.pop-up {
      opacity: 1;
    }

    .letter-content {
      opacity: 0;
      transition: opacity 0.6s ease 0.3s;
    }

    .letter.content-visible .letter-content {
      opacity: 1;
    }

    .letter-header {
      text-align: center;
      margin-bottom: 20px;
      border-bottom: 2px solid #6c757d;
    }

    .letter-title {
      font-size: 22px;
      font-weight: bold;
      color: #495057;
      margin-bottom: 6px;
    }

    .letter-date {
      font-size: 12px;
      color: #6c757d;
      font-style: italic;
    }

    .letter-body {
      text-align: justify;
      margin-bottom: 15px;
    }

    .letter-signature {
      text-align: right;
      margin-top: 25px;
      font-style: italic;
      color: #495057;
    }

    .stamp {
      position: absolute;
      top: 15px;
      right: 15px;
      width: 60px;
      height: 60px;
      background: linear-gradient(145deg, #dc3545 0%, #c82333 100%);
      border: 3px solid #fff;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 14px;
      font-weight: bold;
      box-shadow: 0 4px 12px rgba(220,53,69,0.3), inset 0 1px 0 rgba(255,255,255,0.2);
      z-index: 8;
    }

    .scroll-indicator {
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      color: #495057;
      font-size: 13px;
      opacity: 0;
      transition: opacity 0.3s ease;
      background: rgba(255,255,255,0.95);
      padding: 8px 16px;
      border-radius: 15px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      z-index: 10;
    }

    .scroll-indicator.visible {
      opacity: 1;
    }

    .instructions {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      color: #495057;
      font-size: 14px;
      opacity: 0.8;
      background: rgba(255,255,255,0.9);
      padding: 10px 20px;
      border-radius: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      z-index: 10;
    }
  </style>
</head>
<body>
  <audio id="bgMusic" src="music.mp3" loop></audio>
  <audio id="popSound" src="pop.wav"></audio>

  <div class="envelope-container" id="envelopeContainer">
    <div class="envelope" id="envelope">
      <div class="envelope-back"></div>
      <div class="envelope-inner"></div>
      <div class="envelope-flap"></div>
      <div class="stamp">üìÆ <br><span style="font-size:8px;">MAIL</span></div>
    </div>

    <div class="letter" id="letter">
      <div class="letter-content">
        <div class="letter-header">
          <div class="letter-title">Surat Istimewa</div>
          <div class="letter-date">Purwakarta, 20 September 2025</div>
        </div>
        <div class="letter-body">
          <p>9 bulan tidak terasa waktu bergulir.</p>
          <p>Tak terbayangkan jika waktu itu aku tidak menghubungimu.</p>
          <p>Akankah kita tetap dipersatukan oleh takdir Allah SWT.</p>
          <p>Di bulan ke 9 dan 9 bulan sudah kita berhubungan, hingga saat ini sudah menjadi tunangan.</p>
          <p>Aku sangat bersyukur dan berterima kasih kepada Allah yang telah memilihkan dirimu untuk menjadi teman hidupku.</p>
          <p>Aku merasa 12 bulan lamanya menuju hari pernikahan sangatlah lama, dan benar saja begitu banyak ujian yang aku rasakan dalam hubungan ini.</p>
          <p>Terkadang aku senang, tertawa jika bisa bertemu dan berbincang hal seru denganmu.</p>
          <p>Terkadang aku terlelap dalam kesedihan, karena pertengkaran kecil yang sebetulnya mungkin tidak perlu terlalu dipikirkan dan diperdebatkan.</p>
          <p>Namun namanya hidup memang isinya adalah ujian, dan aku yakin bersamamu nanti kita bisa lalui bersama.</p>

          <p><em>Aku ingin kamu menjadi langit yang selalu menerima aku sebagai senja, menerima apa adanya. Yang kadang hitam kelam, kadang merah merekah.</em></p>

          <p><strong>"Mau diulang 1000x pun, aku tetap mantep milih kamu"</strong></p>

          <p>Aku pernah berpikir, apakah akan berbeda jika aku bisa memulai hubungan ini lebih awal, bagaimana rasanya.</p>
          <p>Tapi aku yakin dimana waktu kita dipisahkan, kita sama-sama berjuang dan memperbaiki diri demi masa depan yang kita impikan.</p>
          <p>Aku ingin bisa menjadi teman hidup sesurgamu, mencari ridho Allah dalam setiap langkah yang kita tempuh. Aamiin.</p>

          <p>Semoga suka dengan hadiah kecil yang aku beri.</p>
          <p>Ingatlah setiap pemberian yang aku beri itu tanda sayang dan tidak berharap imbalan (jadi tidak perlu membalas, cukup terima dengan segenap hati).</p>
          <p>Semoga juga hubungan kita dengan Allah selalu dan makin dekat, sehingga hubungan kitapun tetap bisa erat dan bertahan sampai maut memisahkan. Aamiin.</p>
        </div>
        <div class="letter-signature">
          Tertanda,<br>
          <strong>Soremu</strong> ‚ú®
        </div>
      </div>
    </div>
  </div>

  <div class="scroll-indicator" id="scrollIndicator">üñ±Ô∏è Gunakan scroll untuk mengontrol surat</div>
  <div class="instructions">Klik amplop untuk buka/tutup ‚Ä¢ Scroll ‚Üë‚Üì untuk mengontrol surat</div>

  <script>
    const envelopeContainer = document.getElementById('envelopeContainer');
    const envelope = document.getElementById('envelope');
    const letter = document.getElementById('letter');
    const scrollIndicator = document.getElementById('scrollIndicator');
    const bgMusic = document.getElementById('bgMusic');
    const popSound = document.getElementById('popSound');

    let isOpened = false;
    let letterOffset = 0;
    let bgStarted = false;

    // Buka amplop
    function openEnvelope() {
      envelope.classList.add('opened');
      letter.classList.add('pop-up');
      setTimeout(() => letter.classList.add('content-visible'), 300);
      try { popSound.currentTime = 0; popSound.play(); } catch(e) {}
      if (!bgStarted) { bgStarted = true; bgMusic.play().catch(() => {}); }
      isOpened = true;
    }

    // Tutup amplop
    function closeEnvelope() {
      letter.classList.remove('content-visible');
      letter.classList.remove('pop-up');
      letterOffset = 0;
      letter.style.transform = `translate(-50%, -50%)`;
      scrollIndicator.classList.remove('visible');
      setTimeout(() => {
        envelope.classList.remove('opened');
        try { popSound.currentTime = 0; popSound.play(); } catch(e) {}
      }, 300);
      isOpened = false;
    }

    envelopeContainer.addEventListener('click', () => {
      if (isOpened) closeEnvelope();
      else openEnvelope();
    });

    // Scroll untuk mengangkat atau menurunkan surat
    let scrollTimeout;
    document.addEventListener('wheel', function(e) {
      if (!isOpened) return;
      e.preventDefault();
      clearTimeout(scrollTimeout);
      scrollIndicator.classList.add('visible');
      scrollTimeout = setTimeout(() => scrollIndicator.classList.remove('visible'), 1800);

      const delta = e.deltaY;
      letterOffset -= delta * 0.3;

      // Batasi offset maksimal berdasarkan tinggi surat
      const letterHeight = letter.offsetHeight;
      const maxOffset = letterHeight / 2;
      letterOffset = Math.min(0, Math.max(-maxOffset, letterOffset));

      letter.style.transform = `translate(-50%, calc(-50% + ${letterOffset}px))`;

      if (letterOffset >= 0) {
        closeEnvelope();
      }
    }, { passive: false });

    // Floating hearts
    function createHeart() {
      const heart = document.createElement('div');
      heart.className = 'heart';
      heart.innerText = '‚ù§Ô∏è';
      heart.style.left = Math.random() * (window.innerWidth - 40) + 'px';
      heart.style.top = window.innerHeight + 'px';
      heart.style.fontSize = (12 + Math.random() * 28) + 'px';
      document.body.appendChild(heart);
      setTimeout(() => heart.remove(), 7000);
    }

    setInterval(createHeart, 600);
  </script>
</body>
</html>
